import { useNavigate, useLocation } from "react-router-dom";
import styled from "styled-components";

const NavContainer = styled.nav`
  position: relative;
  background: #000000;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0;
  padding: 24px 0;
  border-top-left-radius: 30px;
  border-top-right-radius: 30px;
  overflow: hidden;
  box-sizing: border-box;
  flex-shrink: 0;
  z-index: 1000;
`;

const NavItem = styled.button`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  position: relative;
  min-width: 40px;
  height: 48px;
  flex: 1;
  outline: none;
  
  &:focus {
    outline: none;
  }
  
  &:focus-visible {
    outline: none;
  }
  
  &:active {
    outline: none;
  }
`;

const NavIcon = styled.div`
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: ${(props) => (props.$active ? "#2ab7ca" : "#ffffff")};
  
  svg {
    width: 100%;
    height: 100%;
    display: block;
  }
`;

const NavLabel = styled.span`
  font-family: "Inter", "Noto Sans KR", sans-serif;
  font-weight: bold;
  font-size: 12px;
  color: ${(props) => (props.$active ? "#2ab7ca" : "#ffffff")};
  white-space: nowrap;
`;

// SVG 아이콘 컴포넌트들
const HomeIcon = () => (
  <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clipPath="url(#clip0_156_1764)">
      <path
        d="M3.71461 24.4509H9.42842V16.586C9.42842 16.2317 9.54862 15.9348 9.78902 15.6952C10.0284 15.4546 10.325 15.3343 10.6789 15.3343H15.3218C15.6756 15.3343 15.9728 15.4546 16.2132 15.6952C16.4525 15.9348 16.5722 16.2317 16.5722 16.586V24.4509H22.286V10.9859C22.286 10.8268 22.2515 10.6822 22.1824 10.5521C22.1132 10.422 22.0188 10.3084 21.8991 10.2113L13.5668 3.92493C13.4079 3.78654 13.2191 3.71735 13.0003 3.71735C12.7816 3.71735 12.5933 3.78654 12.4354 3.92493L4.10152 10.2113C3.98287 10.3104 3.88846 10.424 3.8183 10.5521C3.74814 10.6802 3.71358 10.8247 3.71461 10.9859V24.4509ZM2.16699 24.4509V10.9859C2.16699 10.5893 2.25572 10.2139 2.43318 9.85964C2.61064 9.50541 2.85517 9.21365 3.16675 8.98438L11.5007 2.66704C11.9371 2.33346 12.4354 2.16667 12.9957 2.16667C13.5559 2.16667 14.0573 2.33346 14.5 2.66704L22.8339 8.98284C23.1465 9.21211 23.391 9.50438 23.5675 9.85964C23.7449 10.2139 23.8337 10.5893 23.8337 10.9859V24.4509C23.8337 24.866 23.6794 25.228 23.3709 25.5368C23.0624 25.8456 22.7008 26 22.286 26H16.2751C15.9202 26 15.623 25.8802 15.3837 25.6406C15.1443 25.4 15.0246 25.1025 15.0246 24.7483V16.8849H10.976V24.7483C10.976 25.1036 10.8564 25.401 10.617 25.6406C10.3776 25.8802 10.081 26 9.72711 26H3.71461C3.29985 26 2.93822 25.8456 2.62973 25.5368C2.32124 25.228 2.16699 24.866 2.16699 24.4509Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_156_1764">
        <rect width="26" height="26" fill="white" />
      </clipPath>
    </defs>
  </svg>
);

const RankingIcon = () => (
  <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M16.5 6.24037C16.428 6.36595 16.3447 6.51414 16.2501 6.68493L16.127 6.90595L16.0981 6.95619C16.0002 7.13702 15.8369 7.43591 15.5644 7.64312C15.2869 7.85409 14.9516 7.92693 14.7569 7.96963L14.7017 7.98093L14.4631 8.03493C14.242 8.08516 14.0625 8.12535 13.9105 8.16428C14.0097 8.28609 14.1391 8.4393 14.3073 8.63647L14.4706 8.82735L14.5083 8.87005C14.6439 9.02702 14.8624 9.27819 14.9641 9.6047C15.0646 9.92619 15.0294 10.2577 15.0081 10.4662L15.0018 10.5252L14.9767 10.7801L14.924 11.3578C15.0558 11.3 15.204 11.2322 15.3811 11.1506L15.6059 11.0476L15.6561 11.0225C15.8369 10.9384 16.1496 10.7902 16.5 10.7902C16.8504 10.7902 17.1631 10.9384 17.3439 11.0238L17.3941 11.0476L17.6189 11.1506C17.7939 11.2327 17.9463 11.3017 18.076 11.3578L18.0233 10.7801L17.9982 10.5252L17.9919 10.4662C17.9706 10.2565 17.9354 9.92619 18.0359 9.6047C18.1363 9.27819 18.3561 9.02702 18.4917 8.87005L18.5294 8.82735L18.6927 8.63647C18.8609 8.4393 18.9903 8.28609 19.0895 8.16428C18.9375 8.1266 18.758 8.08516 18.5369 8.03493L18.2983 7.98093L18.2431 7.96837C18.0484 7.92693 17.7131 7.85409 17.4356 7.64186C17.1631 7.43591 16.9998 7.13702 16.9019 6.95744L16.873 6.90595L16.7499 6.68493C16.6561 6.51414 16.5728 6.36595 16.5 6.24037ZM15.2618 4.6907C15.4778 4.40814 15.8696 4 16.5 4C17.1304 4 17.5222 4.40814 17.7382 4.6907C17.9454 4.95944 18.1527 5.33242 18.3661 5.71544L18.395 5.76693L18.5181 5.98921L18.5897 6.11479L18.714 6.14367L18.9526 6.19767L19.0129 6.21023C19.4235 6.30442 19.8329 6.39609 20.1469 6.52042C20.4935 6.6573 20.9632 6.92228 21.1453 7.50623C21.3236 8.07763 21.0988 8.56237 20.9029 8.87507C20.7208 9.16391 20.4445 9.4854 20.162 9.81567L20.1243 9.85963L19.961 10.0518L19.858 10.1736C19.8606 10.2188 19.8668 10.2715 19.8731 10.3431L19.8982 10.598L19.9033 10.6558C19.946 11.0979 19.9874 11.5248 19.9723 11.8664C19.9573 12.2256 19.8719 12.7681 19.3846 13.136C18.8823 13.5178 18.3297 13.4349 17.9781 13.3332C17.6541 13.2415 17.2711 13.0645 16.8855 12.8874L16.8315 12.8623L16.6055 12.758L16.5 12.7091L16.3933 12.7593L16.1685 12.8623L16.1132 12.8874C15.7289 13.0645 15.3472 13.2415 15.0219 13.3332C14.6703 13.4337 14.1177 13.5178 13.6154 13.136C13.1294 12.7681 13.0427 12.2256 13.0277 11.8677C13.0126 11.5248 13.0528 11.0979 13.0967 10.6558L13.1018 10.598L13.1269 10.3431L13.1432 10.1736L13.039 10.0518L12.8757 9.85963L12.838 9.81567C12.5555 9.4854 12.2792 9.16265 12.0971 8.87381C11.9012 8.56237 11.6764 8.07763 11.8547 7.50498C12.0356 6.92353 12.5065 6.6573 12.8531 6.52042C13.1671 6.39609 13.5765 6.30442 13.9871 6.21149L14.0461 6.19893L14.286 6.14367L14.4116 6.11479L14.4819 5.98921L14.605 5.76693L14.6339 5.71544C14.8473 5.33242 15.0546 4.95944 15.2618 4.6907ZM15.1827 14.0465H17.8173C18.6525 14.0465 19.372 14.0465 19.9485 14.1244C20.5663 14.2073 21.1578 14.3944 21.6375 14.8741C22.1173 15.3538 22.3044 15.9453 22.3873 16.5632C22.4651 17.1396 22.4651 17.8592 22.4651 18.6943V21.7911C22.6711 21.7283 22.8833 21.6881 23.098 21.6593C23.6745 21.5814 24.394 21.5814 25.2292 21.5814H25.3522C26.1873 21.5814 26.9069 21.5814 27.4833 21.6593C28.1012 21.7421 28.6927 21.9293 29.1724 22.409C29.6521 22.8887 29.8393 23.4802 29.9221 24.098C30 24.6745 30 25.394 30 26.2292V30.0581C30 30.3079 29.9008 30.5475 29.7241 30.7241C29.5475 30.9008 29.3079 31 29.0581 31C28.8083 31 28.5688 30.9008 28.3921 30.7241C28.2155 30.5475 28.1163 30.3079 28.1163 30.0581V26.2907C28.1163 25.3765 28.1138 24.7837 28.056 24.3492C28.0007 23.9411 27.9116 23.813 27.84 23.7414C27.7684 23.6698 27.6403 23.5807 27.2322 23.5254C26.7964 23.4676 26.2049 23.4651 25.2907 23.4651C24.3765 23.4651 23.7837 23.4676 23.3492 23.5254C22.9411 23.5807 22.813 23.6698 22.7414 23.7414C22.6698 23.813 22.5807 23.9411 22.5254 24.3492C22.4676 24.785 22.4651 25.3765 22.4651 26.2907V30.0581C22.4651 30.3079 22.3659 30.5475 22.1893 30.7241C22.0126 30.9008 21.7731 31 21.5233 31C21.2735 31 21.0339 30.9008 20.8573 30.7241C20.6806 30.5475 20.5814 30.3079 20.5814 30.0581V18.7558C20.5814 17.8416 20.5789 17.2488 20.5211 16.8143C20.4659 16.4062 20.3767 16.2781 20.3051 16.2065C20.2335 16.1349 20.1054 16.0458 19.6973 15.9905C19.2615 15.9327 18.67 15.9302 17.7558 15.9302H15.2442C14.33 15.9302 13.7372 15.9327 13.3027 15.9905C12.8946 16.0458 12.7665 16.1349 12.6949 16.2065C12.6233 16.2781 12.5341 16.4062 12.4789 16.8143C12.4211 17.2501 12.4186 17.8416 12.4186 18.7558V30.0581C12.4186 30.3079 12.3194 30.5475 12.1427 30.7241C11.9661 30.9008 11.7265 31 11.4767 31C11.2269 31 10.9874 30.9008 10.8107 30.7241C10.6341 30.5475 10.5349 30.3079 10.5349 30.0581C10.5349 29.1439 10.5324 28.5512 10.4746 28.1167C10.4193 27.7085 10.3302 27.5804 10.2586 27.5088C10.187 27.4373 10.0589 27.3481 9.65079 27.2928C9.21502 27.2351 8.62353 27.2326 7.7093 27.2326C6.79507 27.2326 6.20233 27.2351 5.76781 27.2928C5.35967 27.3481 5.23158 27.4373 5.16 27.5088C5.08842 27.5804 4.99926 27.7085 4.944 28.1167C4.88623 28.5524 4.88372 29.1439 4.88372 30.0581C4.88372 30.3079 4.78449 30.5475 4.60786 30.7241C4.43122 30.9008 4.19166 31 3.94186 31C3.69206 31 3.4525 30.9008 3.27586 30.7241C3.09923 30.5475 3 30.3079 3 30.0581V29.9953C3 29.1615 3 28.4419 3.07786 27.8655C3.16074 27.2476 3.34786 26.6561 3.82758 26.1764C4.3073 25.6967 4.90005 25.5096 5.51665 25.4267C6.09307 25.3488 6.81265 25.3488 7.64777 25.3488H7.77084C8.60595 25.3488 9.32553 25.3488 9.90195 25.4267C10.1171 25.4543 10.3281 25.4983 10.5349 25.5586V18.6943C10.5349 17.8592 10.5349 17.1396 10.6127 16.5632C10.6956 15.9453 10.8827 15.3538 11.3625 14.8741C11.8422 14.3944 12.4349 14.2073 13.0515 14.1244C13.628 14.0465 14.3475 14.0465 15.1827 14.0465Z"
      fill="currentColor"
    />
  </svg>
);

const ClubIcon = () => {
  const iconColor = "currentColor";
  return (
    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M1.33301 26.6667V25.3333C1.33301 22.858 2.31634 20.484 4.06668 18.7337C5.81702 16.9833 8.19099 16 10.6663 16C13.1417 16 15.5157 16.9833 17.266 18.7337C19.0163 20.484 19.9997 22.858 19.9997 25.3333V26.6667"
        stroke={iconColor}
        strokeWidth="1.5"
        strokeLinecap="round"
        fill="none"
      />
      <path
        d="M17.333 18.6667C17.333 16.8986 18.0354 15.2029 19.2856 13.9526C20.5359 12.7024 22.2316 12 23.9997 12C24.8752 12 25.7421 12.1724 26.5509 12.5075C27.3597 12.8425 28.0947 13.3336 28.7137 13.9526C29.3328 14.5717 29.8238 15.3066 30.1589 16.1154C30.4939 16.9243 30.6663 17.7912 30.6663 18.6667V19.3333"
        stroke={iconColor}
        strokeWidth="1.5"
        strokeLinecap="round"
        fill="none"
      />
      <path
        d="M10.6663 16C12.0808 16 13.4374 15.4381 14.4376 14.4379C15.4378 13.4377 15.9997 12.0812 15.9997 10.6667C15.9997 9.25218 15.4378 7.89562 14.4376 6.89543C13.4374 5.89524 12.0808 5.33333 10.6663 5.33333C9.25185 5.33333 7.8953 5.89524 6.8951 6.89543C5.89491 7.89562 5.33301 9.25218 5.33301 10.6667C5.33301 12.0812 5.89491 13.4377 6.8951 14.4379C7.8953 15.4381 9.25185 16 10.6663 16ZM23.9997 12C25.0605 12 26.078 11.5786 26.8281 10.8284C27.5782 10.0783 27.9997 9.06087 27.9997 8C27.9997 6.93913 27.5782 5.92172 26.8281 5.17157C26.078 4.42143 25.0605 4 23.9997 4C22.9388 4 21.9214 4.42143 21.1712 5.17157C20.4211 5.92172 19.9997 6.93913 19.9997 8C19.9997 9.06087 20.4211 10.0783 21.1712 10.8284C21.9214 11.5786 22.9388 12 23.9997 12Z"
        stroke={iconColor}
        strokeWidth="1.5"
        strokeLinecap="round"
        strokeLinejoin="round"
        fill="none"
      />
    </svg>
  );
};

const MyPageIcon = () => {
  const iconColor = "currentColor";
  return (
    <svg width="33" height="31" viewBox="0 0 33 31" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M16.056 13.801C14.4879 13.801 13.1449 13.2489 12.0269 12.1446C10.9088 11.0404 10.3505 9.7146 10.3517 8.16718C10.353 6.61977 10.9114 5.2927 12.0269 4.18597C13.1424 3.07924 14.4854 2.52901 16.056 2.53527C17.6265 2.54153 18.9695 3.09239 20.085 4.18785C21.2005 5.28331 21.7589 6.61038 21.7602 8.16906C21.7614 9.72774 21.2031 11.0536 20.085 12.1465C18.967 13.2395 17.624 13.7897 16.056 13.801ZM2.74609 25.431V24.2892C2.74609 23.5143 2.97426 22.7894 3.4306 22.1146C3.88821 21.4385 4.50299 20.9139 5.27497 20.5409C7.0699 19.6908 8.86609 19.0535 10.6636 18.6291C12.4598 18.2035 14.2572 17.9906 16.056 17.9906C17.8547 17.9906 19.6528 18.2035 21.4502 18.6291C23.2477 19.0548 25.0426 19.692 26.835 20.5409C27.6083 20.9139 28.2231 21.4385 28.6794 22.1146C29.137 22.7894 29.3658 23.5143 29.3658 24.2892V25.431C29.3658 25.9819 29.1763 26.4451 28.7973 26.8207C28.4183 27.1937 27.9493 27.3803 27.3902 27.3803H4.72356C4.16454 27.3803 3.69553 27.1931 3.31652 26.8188C2.9375 26.4445 2.74736 25.9831 2.74609 25.431ZM4.6475 25.5024H27.4644V24.2873C27.4644 23.8717 27.3281 23.4805 27.0556 23.1136C26.7843 22.7481 26.4085 22.4388 25.9281 22.1859C24.3638 21.4373 22.7502 20.8639 21.0871 20.4658C19.424 20.0676 17.7469 19.8686 16.056 19.8686C14.365 19.8686 12.6879 20.0676 11.0248 20.4658C9.36173 20.8639 7.74807 21.4373 6.18384 22.1859C5.70215 22.4388 5.32631 22.7481 5.05631 23.1136C4.78377 23.4805 4.6475 23.8723 4.6475 24.2892V25.5024ZM16.056 11.923C17.1017 11.923 17.9973 11.555 18.7426 10.8188C19.488 10.0827 19.86 9.19817 19.8588 8.1653C19.8575 7.13244 19.4855 6.24856 18.7426 5.51367C17.9998 4.77877 17.1043 4.4107 16.056 4.40944C15.0076 4.40819 14.1127 4.77627 13.3712 5.51367C12.6296 6.25107 12.2569 7.13495 12.2531 8.1653C12.2493 9.19566 12.622 10.0802 13.3712 10.8188C14.1203 11.5575 15.0152 11.9249 16.056 11.9212"
        fill={iconColor}
      />
    </svg>
  );
};

export default function BottomNav() {
  const navigate = useNavigate();
  const location = useLocation();

  const navItems = [
    { path: "/", label: "홈", icon: HomeIcon },
    { path: "/ranking", label: "랭킹", icon: RankingIcon },
    { path: "/club", label: "동아리", icon: ClubIcon },
    { path: "/mypage", label: "마이페이지", icon: MyPageIcon },
  ];

  const isActive = (path) => {
    if (path === "/") {
      return location.pathname === "/";
    }
    return location.pathname.startsWith(path);
  };

  return (
    <NavContainer>
      {navItems.map((item) => {
        const active = isActive(item.path);
        const IconComponent = item.icon;
        return (
          <NavItem key={item.path} onClick={() => navigate(item.path)}>
            <NavIcon $active={active}>
              <IconComponent />
            </NavIcon>
            <NavLabel $active={active}>{item.label}</NavLabel>
          </NavItem>
        );
      })}
    </NavContainer>
  );
}
